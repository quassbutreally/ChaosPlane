<Window
    x:Class="ChaosPlane.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ChaosPlane"
    Title="ChaosPlane">

    <Grid Background="{StaticResource CpBgBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />   <!-- title bar -->
            <RowDefinition Height="*" />      <!-- content -->
            <RowDefinition Height="Auto" />   <!-- status bar -->
        </Grid.RowDefinitions>

        <!-- ── Custom title bar ──────────────────────────────────────────── -->
        <Grid x:Name="TitleBarGrid"
              Grid.Row="0"
              Height="40"
              Background="{StaticResource CpPanelBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Logo / wordmark -->
            <StackPanel Grid.Column="0"
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        Margin="16,0,0,0"
                        Spacing="8">
                <TextBlock Text="CHAOSPLANE"
                           FontFamily="Consolas"
                           FontSize="13"
                           FontWeight="Bold"
                           CharacterSpacing="200"
                           Foreground="{StaticResource CpAmberBrush}"
                           VerticalAlignment="Center" />
                <TextBlock Text="// CL650 FAILURE SYSTEM"
                           FontFamily="Consolas"
                           FontSize="10"
                           Foreground="{StaticResource CpTextDimBrush}"
                           VerticalAlignment="Center"
                           Margin="4,0,0,0" />
            </StackPanel>

            <!-- Connection indicators + window controls -->
            <StackPanel Grid.Column="2"
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        Spacing="16">

                <!-- X-Plane indicator -->
                <StackPanel Orientation="Horizontal" Spacing="6" Margin="0,0,0,0">
                    <TextBlock x:Name="XplaneIndicator"
                               Text="⬤"
                               FontSize="7"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource CpTextMutedBrush}" />
                    <TextBlock Text="X-PLANE"
                               Style="{StaticResource CpDimTextStyle}"
                               VerticalAlignment="Center" />
                </StackPanel>

                <!-- Twitch indicator -->
                <StackPanel Orientation="Horizontal" Spacing="6">
                    <TextBlock x:Name="TwitchIndicator"
                               Text="⬤"
                               FontSize="7"
                               VerticalAlignment="Center"
                               Foreground="{StaticResource CpTextMutedBrush}" />
                    <TextBlock Text="TWITCH"
                               Style="{StaticResource CpDimTextStyle}"
                               VerticalAlignment="Center" />
                </StackPanel>

                <!-- Window controls -->
                <StackPanel Orientation="Horizontal" Spacing="0">
                    <Button Content="─"
                            Width="46" Height="40"
                            FontSize="10"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{StaticResource CpTextDimBrush}"
                            Click="MinimiseButton_Click" />
                    <Button Content="✕"
                            Width="46" Height="40"
                            FontSize="10"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{StaticResource CpTextDimBrush}"
                            Margin="0,0,0,0"
                            Click="CloseButton_Click" />
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- ── Main content: sidebar + frame ─────────────────────────────── -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="180" />   <!-- sidebar -->
                <ColumnDefinition Width="*" />     <!-- page content -->
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Border Grid.Column="0"
                    Background="{StaticResource CpPanelBrush}"
                    BorderBrush="{StaticResource CpBorderBrush}"
                    BorderThickness="0,0,1,0">
                <StackPanel Margin="0,16,0,0" Spacing="2">

                    <TextBlock Text="NAVIGATION"
                               Style="{StaticResource CpSectionHeaderStyle}"
                               Margin="16,0,16,12" />

                    <Button x:Name="NavDashboard"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Style="{StaticResource CpButtonStyle}"
                            Margin="8,0"
                            Padding="12,10"
                            Click="NavDashboard_Click"
                            BorderThickness="0">
                        <StackPanel Orientation="Horizontal" Spacing="5" >
                            <SymbolIcon Symbol="Home" VerticalAlignment="Center"/>
                            <TextBlock Text="DASHBOARD" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="NavFailureBrowser"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Style="{StaticResource CpButtonStyle}"
                            Margin="8,0"
                            Padding="12,10"
                            Click="NavFailureBrowser_Click"
                            BorderThickness="0">
                        <StackPanel Orientation="Horizontal" Spacing="5" >
                            <SymbolIcon Symbol="Library" VerticalAlignment="Center"/>
                            <TextBlock Text="FAILURE BROWSER" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Left"
                            Style="{StaticResource CpButtonStyle}"
                            Margin="8,0"
                            Padding="12,10"
                            Click="NavSettings_Click"
                            BorderThickness="0">
                        <StackPanel Orientation="Horizontal" Spacing="5" >
                            <SymbolIcon Symbol="Setting" VerticalAlignment="Center"/>
                            <TextBlock Text="SETTINGS" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <!-- Divider -->
                    <Border Height="1"
                            Background="{StaticResource CpBorderBrush}"
                            Margin="16,16" />

                    <!-- Quick stats -->
                    <TextBlock Text="SESSION"
                               Style="{StaticResource CpSectionHeaderStyle}"
                               Margin="16,0,16,8" />

                    <StackPanel Margin="16,0" Spacing="8">
                        <StackPanel>
                            <TextBlock Text="ACTIVE FAILURES"
                                       Style="{StaticResource CpDimTextStyle}" />
                            <TextBlock x:Name="ActiveFailureCountText"
                                       Text="0"
                                       FontFamily="Consolas"
                                       FontSize="22"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource CpAmberBrush}" />
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="TOTAL TRIGGERED"
                                       Style="{StaticResource CpDimTextStyle}" />
                            <TextBlock x:Name="SessionTriggerCountText"
                                       Text="0"
                                       FontFamily="Consolas"
                                       FontSize="22"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource CpTextBrush}" />
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
            </Border>

            <!-- Page content frame -->
            <Frame x:Name="ContentFrame"
                   Grid.Column="1"
                   Background="{StaticResource CpBgBrush}" />
        </Grid>

        <!-- ── Status bar ─────────────────────────────────────────────────── -->
        <Border Grid.Row="2"
                Background="{StaticResource CpPanelBrush}"
                BorderBrush="{StaticResource CpBorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="16,6">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="LastEventText"
                           Grid.Column="0"
                           Text="— no events yet —"
                           Style="{StaticResource CpDimTextStyle}"
                           VerticalAlignment="Center"
                           TextTrimming="CharacterEllipsis" />

                <TextBlock x:Name="StatusMessageText"
                           Grid.Column="1"
                           Style="{StaticResource CpDimTextStyle}"
                           VerticalAlignment="Center" />
            </Grid>
        </Border>

    </Grid>
</Window>
